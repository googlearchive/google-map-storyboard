<link rel="import" href="bower_components/polymer/polymer.html">
<link rel="import" href="bower_components/google-apis/google-apis.html">
<link rel="import" href="bower_components/google-map/google-map.html">

<polymer-element name="google-map-scene" attributes="address zoom">
<template>
  <style>
  </style>
  <google-maps-api version="3.exp" libraries="places,geometry" on-api-load="{{updateAddress}}"></google-maps-api>
</template>

<script>
  Polymer({

    /**
     * The address associated with the scene.
     *
     * @attribute address
     * @type string
     * @default null
     */
    address: null,
    apiKey:null,
    location:null,

    /**
     * The zoom of the map.
     *
     * @attribute zoom
     * @type number
     * @default null
     */
    zoom: 10,
    

    updateAddress: function(){
      if (this.address) {
        var geocoder = new google.maps.Geocoder();
        geocoder.geocode( {address: this.address}, function(place, status) {
          if (status == google.maps.GeocoderStatus.OK) {
            this.location = place[0].geometry.location;
            window.console.log('Location ready: '+ this.address);
          }
        }.bind(this));
        this.onMutation(this, this.updateAddress);
      }

    }
    
  });
</script>
</polymer-element>
